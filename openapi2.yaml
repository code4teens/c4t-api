swagger: "2.0"
info:
  title: Code4Teens REST API
  version: 1.0.0
schemes:
  - https
consumes:
  - application/json
produces:
  - application/json
paths:
  /auth/login:
    post:
      summary: Log a User in
      operationId: login
      tags:
        - Auth
      x-google-backend:
        address: https://api-auth-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: body
          name: credentials
          description: Login credentials
          schema:
            type: object
            properties:
              id:
                type: integer
                description: Discord ID
                minimum: 111111111111111111
                maximum: 999999999999999999
              password:
                type: string
                description: Password
            required:
              - id
              - password
            example:
              id: 111111111111111111
              password: password
      responses:
        200:
          description: OK
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: OK
              status: 200
              detail: User 111111111111111111 logged in
        400:
          $ref: '#/responses/400-Bad-Request'
        401:
          description: Unauthorised
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Unauthorised
              status: 401
              detail: Wrong password for User 111111111111111111
        404:
          description: Not Found
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Not Found
              status: 404
              detail: User 111111111111111111 not found
  /cohorts:
    get:
      summary: Get all Cohorts
      operationId: get_cohorts
      tags:
        - Cohort
      x-google-backend:
        address: https://api-cohorts-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/Cohort'
            example:
              - id: 1
                name: Code4Teens BotCamp
                nickname: c4t-bc
                duration: 9
                start_date: "2021-04-20"
                is_active: true
                review_schema:
                feedback_schema:
              - id: 2
                name: Code4Work BotCamp
                nickname: c4w-bc
                duration: 6
                start_date: "2021-04-20"
                is_active: false
                review_schema:
                feedback_schema:
    post:
      summary: Create a Cohort
      operationId: create_cohort
      tags:
        - Cohort
      x-google-backend:
        address: https://api-cohorts-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: body
          name: details
          description: Eval details
          schema:
            type: object
            properties:
              name:
                type: string
                description: Cohort name
              nickname:
                type: string
                description: Cohort nickname
              duration:
                type: integer
                description: Cohort duration
                minimum: 1
              start_date:
                type: string
                description: Cohort start date
            required:
              - name
              - nickname
              - duration
              - start_date
            example:
              name: Code4Teens BotCamp
              nickname: c4t-bc
              duration: 9
              start_date: "2021-04-20"
      responses:
        201:
          description: Created
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Created
              status: 201
              detail: Cohort 1 created
        400:
          $ref: '#/responses/400-Bad-Request'
  /cohorts/{id}:
    get:
      summary: Get Cohort
      operationId: get_cohort
      tags:
        - Cohort
      x-google-backend:
        address: https://api-cohorts-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          description: Cohort ID
          type: integer
          required: true
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Cohort'
        404:
          description: Not Found
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Not Found
              status: 404
              detail: Cohort 1 not found
    put:
      summary: Update Cohort
      operationId: update_cohort
      tags:
        - Cohort
      x-google-backend:
        address: https://api-cohorts-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          description: Cohort ID
          type: integer
          required: true
        - in: body
          name: details
          description: Cohort details
          schema:
            type: object
            properties:
              name:
                type: string
                description: Cohort name
              nickname:
                type: string
                description: Cohort nickname
              duration:
                type: integer
                description: Cohort duration
                minimum: 1
              start_date:
                type: string
                description: Cohort start date
              review_schema:
                type: object
                description: Cohort review schema
              feedback_schema:
                type: object
                description: Cohort feedback schema
            example:
              name: Code4Teens BotCamp
              nickname: c4t-bc
              duration: 9
              start_date: "2021-04-20"
              review_schema:
              feedback_schema:
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Cohort'
        400:
          $ref: '#/responses/400-Bad-Request'
        404:
          description: Not Found
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Not Found
              status: 404
              detail: Cohort 1 not found
    delete:
      summary: Delete Cohort
      operationId: delete_cohort
      tags:
        - Cohort
      x-google-backend:
        address: https://api-cohorts-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          description: Cohort ID
          type: integer
          required: true
      responses:
        200:
          description: OK
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: OK
              status: 200
              detail: Cohort 1 deleted
        404:
          description: Not Found
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Not Found
              status: 404
              detail: Cohort 1 not found
  /enrolments:
    get:
      summary: Get all Enrolments
      operationId: get_enrolments
      tags:
        - Enrolment
      x-google-backend:
        address: https://api-enrolments-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/Enrolment'
            example:
              - id: 1
                user:
                  id: 111111111111111111
                  name: John Doe
                  discriminator: "1111"
                  display_name: john.doe
                cohort:
                  id: 1
                  name: Code4Teens BotCamp
                  nickname: c4t-bc
              - id: 2
                user:
                  id: 222222222222222222
                  name: Jane Doe
                  discriminator: "2222"
                  display_name: jane.doe
                cohort:
                  id: 1
                  name: Code4Teens BotCamp
                  nickname: c4t-bc
    post:
      summary: Create an Enrolment
      operationId: create_enrolment
      tags:
        - Enrolment
      x-google-backend:
        address: https://api-enrolments-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: body
          name: details
          description: Enrolment details
          schema:
            type: object
            properties:
              user_id:
                type: integer
                description: Discord ID
                minimum: 111111111111111111
                maximum: 999999999999999999
              cohort_id:
                type: integer
                description: Cohort ID
                minimum: 1
            required:
              - user_id
              - cohort_id
            example:
              user_id: 111111111111111111
              cohort_id: 1
      responses:
        201:
          description: Created
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Created
              status: 201
              detail: Enrolment 1 created
        400:
          $ref: '#/responses/400-Bad-Request'
        409:
          description: Conflict
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Conflict
              status: 409
              detail: Enrolment with posted details already exists
  /enrolments/{id}:
    get:
      summary: Get Enrolment
      operationId: get_enrolment
      tags:
        - Enrolment
      x-google-backend:
        address: https://api-enrolments-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          description: Enrolment ID
          type: integer
          required: true
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Enrolment'
        404:
          description: Not Found
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Not Found
              status: 404
              detail: Enrolment 1 not found
    put:
      summary: Update Enrolment
      operationId: update_enrolment
      tags:
        - Enrolment
      x-google-backend:
        address: https://api-enrolments-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          description: Enrolment ID
          type: integer
          required: true
        - in: body
          name: details
          description: Enrolment details
          schema:
            type: object
            properties:
              user_id:
                type: integer
                description: Discord ID
                minimum: 111111111111111111
                maximum: 999999999999999999
              cohort_id:
                type: integer
                description: Cohort ID
                minimum: 1
            example:
              user_id: 111111111111111111
              cohort_id: 1
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Enrolment'
        400:
          $ref: '#/responses/400-Bad-Request'
        404:
          description: Not Found
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Not Found
              status: 404
              detail: Enrolment 1 not found
    delete:
      summary: Delete Enrolment
      operationId: delete_enrolment
      tags:
        - Enrolment
      x-google-backend:
        address: https://api-enrolments-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          description: Enrolment ID
          type: integer
          required: true
      responses:
        200:
          description: OK
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: OK
              status: 200
              detail: Enrolment 1 deleted
        404:
          description: Not Found
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Not Found
              status: 404
              detail: Enrolment 1 not found
  /evals:
    get:
      summary: Get all Evals
      operationId: get_evals
      tags:
        - Eval
      x-google-backend:
        address: https://api-evals-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/Eval'
            example:
              - id: 1
                evaluator:
                  id: 111111111111111111
                  name: John Doe
                  discriminator: "1111"
                  display_name: john.doe
                evaluatee:
                  id: 222222222222222222
                  name: Jane Doe
                  discriminator: "2222"
                  display_name: jane.doe
                cohort:
                  id: 1
                  name: Code4Teens BotCamp
                  nickname: c4t-bc
                date: "2021-04-20"
                review:
                feedback:
              - id: 2
                evaluator:
                  id: 222222222222222222
                  name: Jane Doe
                  discriminator: "2222"
                  display_name: jane.doe
                evaluatee:
                  id: 111111111111111111
                  name: John Doe
                  discriminator: "1111"
                  display_name: john.doe
                cohort:
                  id: 1
                  name: Code4Teens BotCamp
                  nickname: c4t-bc
                date: "2021-04-20"
                review:
                feedback:
    post:
      summary: Create an Eval
      operationId: create_eval
      tags:
        - Eval
      x-google-backend:
        address: https://api-evals-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: body
          name: details
          description: Eval details
          schema:
            type: object
            properties:
              evaluator_id:
                type: integer
                description: Discord ID
                minimum: 111111111111111111
                maximum: 999999999999999999
              evaluatee_id:
                type: integer
                description: Discord ID
                minimum: 111111111111111111
                maximum: 999999999999999999
              cohort_id:
                type: integer
                description: Cohort ID
                minimum: 1
              date:
                type: string
                description: Eval date
            required:
              - evaluator_id
              - evaluatee_id
              - cohort_id
              - date
            example:
              evaluator_id: 111111111111111111
              evaluatee_id: 222222222222222222
              cohort_id: 1
              date: "2021-04-20"
      responses:
        201:
          description: Created
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Created
              status: 201
              detail: Eval 1 created
        400:
          $ref: '#/responses/400-Bad-Request'
        409:
          description: Conflict
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Conflict
              status: 409
              detail: Eval with posted details already exists
  /evals/{id}:
    get:
      summary: Get Eval
      operationId: get_eval
      tags:
        - Eval
      x-google-backend:
        address: https://api-evals-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          description: Eval ID
          type: integer
          required: true
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Eval'
        404:
          description: Not Found
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Not Found
              status: 404
              detail: Eval 1 not found
    put:
      summary: Update Eval
      operationId: update_eval
      tags:
        - Eval
      x-google-backend:
        address: https://api-evals-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          description: Eval ID
          type: integer
          required: true
        - in: body
          name: details
          description: Eval details
          schema:
            type: object
            properties:
              evaluator_id:
                type: integer
                description: Discord ID
                minimum: 111111111111111111
                maximum: 999999999999999999
              evaluatee_id:
                type: integer
                description: Discord ID
                minimum: 111111111111111111
                maximum: 999999999999999999
              cohort_id:
                type: integer
                description: Cohort ID
                minimum: 1
              date:
                type: string
                description: Eval date
              review:
                type: object
                description: Eval review
              feedback:
                type: object
                description: Eval feedback
            example:
              evaluator_id: 111111111111111111
              evaluatee_id: 222222222222222222
              cohort_id: 1
              date: "2021-04-20"
              review:
              feedback:
      responses:
        200:
          description: OK
          schema:
              $ref: '#/definitions/Eval'
        400:
          $ref: '#/responses/400-Bad-Request'
        404:
          description: Not Found
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Not Found
              status: 404
              detail: Eval 1 not found
    delete:
      summary: Delete Eval
      operationId: delete_eval
      tags:
        - Eval
      x-google-backend:
        address: https://api-evals-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: path
          name: id
          description: Eval ID
          type: integer
          required: true
      responses:
        200:
          description: OK
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: OK
              status: 200
              detail: Eval 1 deleted
        404:
          description: Not Found
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Not Found
              status: 404
              detail: Eval 1 not found
  /subscriptions:
    get:
      summary: Get all Subscriptions
      operationId: get_subscriptions
      tags:
        - Subscription
      x-google-backend:
        address: https://api-subscriptions-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/Subscription'
            example:
              - id: 1
                email: john.doe@gmail.com
                created_at: "2021-04-20T08:42:00"
              - id: 2
                email: jane.doe@gmail.com
                created_at: "2021-04-20T08:42:00"
    post:
      summary: Create a Subscription
      operationId: create_subscription
      tags:
        - Subscription
      x-google-backend:
        address: https://api-subscriptions-gzuvchc2qq-as.a.run.app
        path_translation: APPEND_PATH_TO_ADDRESS
      parameters:
        - in: body
          name: details
          description: Subscription details
          schema:
            type: object
            properties:
              email:
                type: string
                description: Email address
                maxLength: 64
            required:
              - email
            example:
              email: john.doe@gmail.com
      responses:
        201:
          description: Created
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Created
              status: 201
              detail: Subscription created
        400:
          $ref: '#/responses/400-Bad-Request'
        409:
          description: Conflict
          schema:
            type: object
            properties:
              title:
                type: string
              status:
                type: integer
              detail:
                type: integer
            example:
              title: Conflict
              status: 409
              detail: Subscription already exists
responses:
  400-Bad-Request:
    description: Bad Request
    schema:
      $ref: '#/definitions/400-Bad-Request'
definitions:
  User:
    type: object
    properties:
      id:
        type: integer
      name:
        type: string
      discriminator:
        type: string
      display_name:
        type: string
    example:
      id: 111111111111111111
      name: John Doe
      discriminator: "1111"
      display_name: john.doe
  Cohort:
    type: object
    properties:
      id:
        type: integer
      name:
        type: string
      nickname:
        type: string
      duration:
        type: integer
      start_date:
        type: string
      is_active:
        type: boolean
      review_schema:
        type: object
      feedback_schema:
        type: object
    example:
      id: 1
      name: Code4Teens BotCamp
      nickname: c4t-bc
      duration: 9
      start_date: "2021-04-20"
      is_active: true
      review_schema:
      feedback_schema:
  NestedCohort:
    type: object
    properties:
      id:
        type: integer
      name:
        type: string
      nickname:
        type: string
    example:
      id: 1
      name: Code4Teens BotCamp
      nickname: c4t-bc
  Enrolment:
    type: object
    properties:
      id:
        type: integer
      user:
        $ref: '#/definitions/User'
      cohort:
        $ref: '#/definitions/NestedCohort'
    example:
      id: 1
      user:
        id: 111111111111111111
        name: John Doe
        discriminator: "1111"
        display_name: john.doe
      cohort:
        id: 1
        name: Code4Teens BotCamp
        nickname: c4t-bc
  Eval:
    type: object
    properties:
      id:
        type: integer
      evaluator:
        $ref: '#/definitions/User'
      evaluatee:
        $ref: '#/definitions/User'
      cohort:
        $ref: '#/definitions/NestedCohort'
      date:
        type: string
      review:
        type: object
      feedback:
        type: object
    example:
      id: 1
      evaluator:
        id: 111111111111111111
        name: John Doe
        discriminator: "1111"
        display_name: john.doe
      evaluatee:
        id: 222222222222222222
        name: Jane Doe
        discriminator: "2222"
        display_name: jane.doe
      cohort:
        id: 1
        name: Code4Teens BotCamp
        nickname: c4t-bc
      date: "2021-04-20"
      review:
      feedback:
  Subscription:
    type: object
    properties:
      id:
        type: integer
      email: 
        type: string
      created_at:
        type: string
    example:
      id: 1
      email: john.doe@gmail.com
      created_at: "2021-04-20T08:42:00"
  400-Bad-Request:
    type: object
    properties:
      title:
        type: string
      status:
        type: integer
      detail:
        type: integer
    example:
      title: Bad Request
      status: 400
      detail: Bad request
